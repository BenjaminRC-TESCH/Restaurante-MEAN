<app-nav-users></app-nav-users>
<div class="container-xl px-4 mt-4">
    <div class="row">
        <div class="col-xl-4">
            <!-- Profile picture card-->
            <div class="card mb-4 mb-xl-0">
                <div class="card-header">Foto de perfil</div>
                <div class="card-body text-center">
                    <!-- Profile picture image-->
                    <img class="img-account-profile rounded-circle mb-2"
                        src="http://bootdey.com/img/Content/avatar/avatar1.png" alt="">
                    <!-- Profile picture upload button-->
                    <button class="btn btn-primary" type="button">Subir nueva imagen</button>
                </div>
            </div>
        </div>
        <div class="col-xl-8">

            <div class="card mb-4" *ngIf="user && !isEditing">
                <div class="card-header">Información del usuario</div>
                <div class="card-body">
                    <form>
                        <!-- Form Group (username)-->
                        <div class="mb-3">
                            <label class="small mb-1" for="inputUsername">Nombre</label>
                            <h5>{{ user.nombre }}</h5>
                        </div>
                        <!-- Form Row-->
                        <div class="row gx-3 mb-3">
                            <!-- Form Group (last name)-->
                            <div class="col-md-6">
                                <label class="small mb-1" for="inputLastName">Apellido Paterno</label>
                                <h5>{{ user.aPaterno }}</h5>
                            </div>

                            <div class="col-md-6">
                                <label class="small mb-1" for="inputLastName">Apellido Materno</label>
                                <h5>{{ user.aMaterno }}</h5>
                            </div>
                        </div>
                        <!-- Form Row        -->
                        <div class="row gx-3 mb-3">
                            <!-- Form Group (organization name)-->
                            <div class="col-md-6">
                                <label class="small mb-1" for="inputOrgName">Dirección</label>
                                <h5>{{user.direccion}}</h5>
                            </div>
                            <!-- Form Group (location)-->
                            <div class="col-md-6">
                                <label class="small mb-1" for="inputLocation">Teléfono</label>
                                <h5>{{user.telefono}}</h5>
                            </div>
                        </div>
                        <!-- Form Group (email address)-->
                        <div class="mb-3">
                            <label class="small mb-1" for="inputEmailAddress">Correo</label>
                            <h5>{{user.correo}}</h5>
                        </div>
                        <!-- Form Group (email address)-->
                        <div class="mb-3">
                            <label class="small mb-1" for="inputEmailAddress">Contraseña</label>
                            <h5>*************</h5>
                        </div>
                        <!-- Save changes button-->
                        <button type="button" class="btn btn-primary" (click)="toggleEdit()">Editar Perfil</button>
                    </form>
                </div>
            </div>

            <div class="card mb-4" *ngIf="user && isEditing">
                <div class="card-header">Información del usuario</div>
                <div class="card-body ">
                    <form #userForm="ngForm" (ngSubmit)="updateUserProfile(userForm)">

                        <div class="mb-3">
                            <label for="nombre" class="form-label">Nombre:</label>
                            <input id="nombre" type="text" name="nombre" [(ngModel)]="user.nombre" class="form-control inputColor" required>
                        </div>

                        <div class="row gx-3 mb-3">
                            <div class="col-md-6">
                                <label for="aPaterno" class="form-label">Apellido Paterno:</label>
                                <input id="aPaterno" type="text" name="aPaterno" [(ngModel)]="user.aPaterno" class="form-control inputColor" required>
                            </div>
            
                            <div class="col-md-6">
                                <label for="aMaterno" class="form-label">Apellido Materno:</label>
                                <input id="aMaterno" type="text" name="aMaterno" [(ngModel)]="user.aMaterno" class="form-control inputColor" required>
                            </div>
                        </div>

                        <div class="row gx-3 mb-3">
 
                            <div class="col-md-6">
                                <label for="direccion" class="form-label">Dirección</label>
                                <input id="direccion" type="text" name="direccion" [(ngModel)]="user.direccion" class="form-control inputColor" required>
                            </div>
      
                            <div class="col-md-6">
                                <label for="telefono" class="form-label">Teléfono:</label>
                                <input id="telefono" type="text" name="telefono" [(ngModel)]="user.telefono" class="form-control inputColor" required>
                            </div>
                        </div>
    
                        <div class="mb-3">
                            <label for="correo" class="form-label">Correo:</label>
                            <input id="correo" type="text" name="correo" [(ngModel)]="user.correo" class="form-control inputColor" required>
                        </div>
   
                        <div class="mb-3">
                            <label for="password" class="form-label">Contraseña:</label>
                            <div class="input-group showPassword">
                                <input id="password" [type]="showPassword ? 'text' : 'password'" name="password" [(ngModel)]="password"
                                    class="form-control" [disabled]="!enablePassword" #passwordField="ngModel" [required]="enablePassword">
                                <button type="button" class="btn btn-showpassword btn-outline-secondary position-absolute end-0"
                                    (click)="togglePasswordVisibility()" [disabled]="!enablePassword">
                                    <i class="bi" [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
                                </button>
                            </div>
                        </div> 
                        <div class="mb-3">
                            <input class="form-check-input inputColor" type="checkbox" id="enablePassword" [(ngModel)]="enablePassword"
                                (change)="togglePassword()">
                            <label class="form-check-label" for="enablePassword">Modificar contraseña</label>
                        </div>
                        <!-- Save changes button-->
                        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                    </form>
                </div>
            </div>
        </div>
    </div>